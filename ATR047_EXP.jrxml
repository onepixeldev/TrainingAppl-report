<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.10.0.final using JasperReports Library version 6.10.0  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ATR087" pageWidth="842" pageHeight="595" columnWidth="742" leftMargin="50" rightMargin="50" topMargin="20" bottomMargin="80" uuid="23877205-5ff4-4830-9af3-e4c3034b0421">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MyHRIS"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<property name="ireport.jasperserver.url" value="http://10.99.4.7:8080/jasperserver/"/>
	<property name="ireport.jasperserver.user" value="syazwan|upsidev"/>
	<property name="ireport.jasperserver.report.resource" value="/Reports/MyHRIS/HRA_AT/ATR087_files/main_jrxml"/>
	<property name="ireport.jasperserver.reportUnit" value="/Reports/MyHRIS/HRA_AT/ATR087"/>
	<style name="Table 1_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="Table 1_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
			<topPen lineWidth="0.5" lineColor="#000000"/>
			<leftPen lineWidth="0.5" lineColor="#000000"/>
			<bottomPen lineWidth="0.5" lineColor="#000000"/>
			<rightPen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="PROG_LIST" uuid="7c8e8470-c077-4354-a46c-8baa8d7e06c7">
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="MyHRIS"/>
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<parameter name="TRAINING_YEAR" class="java.lang.String"/>
		<queryString>
			<![CDATA[SELECT 'Program Bitara UPSI' BHTITLE,BH_REF_ID,BH_TITLE,
TO_CHAR(BH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(BH_END_DATE,'dd/mm/yyyy') BH_DATE,
BH_VENUE,BH_DATE_FROM,COUNT(SB_STAFF_ID) SB_TOTAL
FROM BITARA_HEAD,STAFF_BITARA
WHERE BH_REF_ID=SB_REF_ID
AND SB_STATUS='APPROVED'
AND SB_ATTENDANCE='Y'
AND TO_CHAR(BH_DATE_FROM,'yyyy')=$P{TRAINING_YEAR}  
GROUP BY 'Program Bitara UPSI',BH_REF_ID,BH_TITLE,
TO_CHAR(BH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(BH_END_DATE,'dd/mm/yyyy'),
BH_VENUE,BH_DATE_FROM
ORDER BY BH_DATE_FROM]]>
		</queryString>
		<field name="BHTITLE" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="BHTITLE"/>
		</field>
		<field name="BH_REF_ID" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="BH_REF_ID"/>
		</field>
		<field name="BH_TITLE" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="BH_TITLE"/>
		</field>
		<field name="BH_DATE" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="BH_DATE"/>
		</field>
		<field name="BH_VENUE" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="BH_VENUE"/>
		</field>
		<field name="BH_DATE_FROM" class="java.sql.Timestamp">
			<property name="com.jaspersoft.studio.field.label" value="BH_DATE_FROM"/>
		</field>
		<field name="SB_TOTAL" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="SB_TOTAL"/>
		</field>
		<variable name="BHTITLE" class="java.lang.String">
			<variableExpression><![CDATA[$F{BHTITLE}]]></variableExpression>
		</variable>
	</subDataset>
	<parameter name="TRAINING_YEAR" class="java.lang.String"/>
	<parameter name="P_OPTION" class="java.lang.String"/>
	<queryString language="SQL">
		<![CDATA[SELECT
BHTITLE,
BH_REF_ID,
BH_TITLE,
BH_DATE,
BH_VENUE,
BH_DATE_FROM,
SB_TOTAL
FROM
(       
    SELECT 
    'Program_Bitara_UPSI' BHTITLE,
    BH_REF_ID,
    BH_TITLE,
    TO_CHAR(BH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(BH_END_DATE,'dd/mm/yyyy') BH_DATE,
    BH_VENUE,
    BH_DATE_FROM,
    COUNT(SB_STAFF_ID) SB_TOTAL
    FROM BITARA_HEAD,STAFF_BITARA
    WHERE BH_REF_ID=SB_REF_ID
    AND SB_STATUS='APPROVED'
    AND SB_ATTENDANCE='Y'
    AND TO_CHAR(BH_DATE_FROM,'yyyy')=$P{TRAINING_YEAR} 
    GROUP BY 'Program_Bitara_UPSI',BH_REF_ID,BH_TITLE,
    TO_CHAR(BH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(BH_END_DATE,'dd/mm/yyyy'),
    BH_VENUE,BH_DATE_FROM
    ORDER BY BH_DATE_FROM
)
UNION
(
    SELECT 'X_BITARA' BHTITLE, 
    TH_REF_ID,
    TH_TRAINING_TITLE, 
    TH_DATE,
    TH_TRAINING_VENUE,
    TH_DATE_FROM,
    STH_TOTAL
    FROM (
    SELECT
    TH_TRAINING_TITLE,
    TH_REF_ID,
    TO_CHAR(TH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(TH_DATE_TO,'dd/mm/yyyy') TH_DATE,
    TH_TRAINING_VENUE,
    TH_DATE_FROM,
    COUNT(STH_STAFF_ID) STH_TOTAL
    FROM TRAINING_HEAD,STAFF_TRAINING_HEAD
    WHERE TH_REF_ID = STH_TRAINING_REFID
    AND TH_STATUS = 'APPROVE'
    AND STH_STATUS = 'APPROVE'
    AND TH_INTERNAL_EXTERNAL <> 'EXTERNAL_AGENCY' 
    AND TO_CHAR(TH_DATE_FROM,'yyyy') < '2016'
    AND ($P{P_OPTION} IS NULL OR ($P{P_OPTION} IS NOT NULL AND TH_INTERNAL_EXTERNAL = NVL($P{P_OPTION},'INTERNAL')))
    AND TO_CHAR(TH_DATE_FROM,'yyyy')=$P{TRAINING_YEAR}
    GROUP BY TH_REF_ID,TH_TRAINING_TITLE,
    TO_CHAR(TH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(TH_DATE_TO,'dd/mm/yyyy'),
    TH_TRAINING_VENUE,TH_TRAINING_COUNTRY,TH_DATE_FROM
    UNION
    SELECT 
    TH_TRAINING_TITLE,
    TH_REF_ID,
    TO_CHAR(TH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(TH_DATE_TO,'dd/mm/yyyy') TH_DATE,
    TH_TRAINING_VENUE,
    TH_DATE_FROM,
    COUNT(STH_STAFF_ID) STH_TOTAL
    FROM TRAINING_HEAD,STAFF_TRAINING_HEAD
    WHERE TH_REF_ID = STH_TRAINING_REFID
    AND TH_STATUS = 'APPROVE'
    AND STH_STATUS = 'APPROVE'
    AND TH_INTERNAL_EXTERNAL = 'EXTERNAL_AGENCY'
    AND ($P{P_OPTION} IS NULL OR ($P{P_OPTION} IS NOT NULL AND TH_INTERNAL_EXTERNAL = NVL($P{P_OPTION},'INTERNAL')))
    AND TO_CHAR(TH_DATE_FROM,'yyyy')=$P{TRAINING_YEAR}
    GROUP BY TH_REF_ID,TH_TRAINING_TITLE,
    TO_CHAR(TH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(TH_DATE_TO,'dd/mm/yyyy'),
    TH_TRAINING_VENUE,TH_TRAINING_COUNTRY,TH_DATE_FROM
    UNION
    SELECT 
    TH_TRAINING_TITLE,
    TH_REF_ID,
    TO_CHAR(TH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(TH_DATE_TO,'dd/mm/yyyy') TH_DATE,
    TH_TRAINING_VENUE,
    TH_DATE_FROM,
    COUNT(STH_STAFF_ID) STH_TOTAL
    FROM TRAINING_HEAD,STAFF_TRAINING_HEAD,STAFF_TRAINING_DETL
    WHERE TH_REF_ID = STH_TRAINING_REFID
    AND STH_TRAINING_REFID = STD_TRAINING_REFID
    AND TH_STATUS = 'APPROVE'
    AND STH_STATUS = 'APPROVE'
    AND STH_STAFF_ID = STD_STAFF_ID
    AND NVL(STD_ATTEND,'N') IN ('Y','A')
    AND TH_INTERNAL_EXTERNAL <> 'EXTERNAL_AGENCY'
    AND TO_CHAR(TH_DATE_FROM,'yyyy') >= '2016'
    AND ($P{P_OPTION} IS NULL OR ($P{P_OPTION} IS NOT NULL AND TH_INTERNAL_EXTERNAL = NVL($P{P_OPTION},'INTERNAL')))
    AND TO_CHAR(TH_DATE_FROM,'yyyy')=$P{TRAINING_YEAR}
    GROUP BY TH_REF_ID,TH_TRAINING_TITLE,
    TO_CHAR(TH_DATE_FROM,'dd/mm/yyyy')||' - '||TO_CHAR(TH_DATE_TO,'dd/mm/yyyy'),
    TH_TRAINING_VENUE,TH_TRAINING_COUNTRY,TH_DATE_FROM
    )
) ORDER BY BHTITLE,BH_DATE_FROM]]>
	</queryString>
	<field name="BHTITLE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="BHTITLE"/>
	</field>
	<field name="BH_REF_ID" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="BH_REF_ID"/>
	</field>
	<field name="BH_TITLE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="BH_TITLE"/>
	</field>
	<field name="BH_DATE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="BH_DATE"/>
	</field>
	<field name="BH_VENUE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="BH_VENUE"/>
	</field>
	<field name="BH_DATE_FROM" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.label" value="BH_DATE_FROM"/>
	</field>
	<field name="SB_TOTAL" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="SB_TOTAL"/>
	</field>
	<variable name="BHTITLE" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="80" splitType="Stretch">
			<textField isStretchWithOverflow="true" evaluationTime="Master" isBlankWhenNull="true">
				<reportElement x="568" y="20" width="174" height="20" uuid="8e96a910-d076-493e-b20c-c395664fdaed"/>
				<textElement textAlignment="Right" verticalAlignment="Top">
					<font fontName="Arial" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA["Muka Surat: "+$V{MASTER_CURRENT_PAGE}+" / "+$V{MASTER_TOTAL_PAGES}]]></textFieldExpression>
			</textField>
			<frame>
				<reportElement x="0" y="0" width="559" height="40" uuid="db20c716-32de-447b-b401-9ecc578ab602"/>
				<staticText>
					<reportElement x="0" y="0" width="380" height="20" uuid="81d7c063-fb72-4024-8104-6e2c1a518ef4"/>
					<textElement>
						<font fontName="Arial" size="14" isBold="true"/>
					</textElement>
					<text><![CDATA[UNIVERSITI PENDIDIKAN SULTAN IDRIS]]></text>
				</staticText>
				<textField>
					<reportElement x="0" y="20" width="559" height="20" uuid="0b478adf-e056-4a5e-b0ed-14b254558ec3"/>
					<textElement>
						<font fontName="Arial" size="12" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["LAPORAN TAHUNAN AKTIVITI UNIT LATIHAN (BITARA) BAGI TAHUN "+($P{TRAINING_YEAR}==null?"":$P{TRAINING_YEAR})]]></textFieldExpression>
				</textField>
			</frame>
			<frame>
				<reportElement mode="Opaque" x="0" y="50" width="742" height="30" backcolor="#CCCCCC" uuid="32d848fb-2fc8-4438-9080-6b23ec0be970"/>
				<staticText>
					<reportElement x="0" y="0" width="40" height="30" uuid="011a3d36-bf1e-4438-a0bc-afa429c25d64"/>
					<box>
						<pen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial" isBold="true"/>
					</textElement>
					<text><![CDATA[BIL]]></text>
				</staticText>
				<staticText>
					<reportElement x="40" y="0" width="200" height="30" uuid="4d66c2b8-448a-4a3d-a8c4-2761b4141a2a">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<box>
						<pen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial" isBold="true"/>
					</textElement>
					<text><![CDATA[PERKARA]]></text>
				</staticText>
				<staticText>
					<reportElement x="240" y="0" width="140" height="30" uuid="552d7e60-acd7-4c68-b0ea-4bc6f16cc616">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<box>
						<pen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial" isBold="true"/>
					</textElement>
					<text><![CDATA[TARIKH PROGRAM ]]></text>
				</staticText>
				<staticText>
					<reportElement x="380" y="0" width="290" height="30" uuid="5266faf9-291e-415d-ba28-2e35c5dbdb55">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<box>
						<pen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial" isBold="true"/>
					</textElement>
					<text><![CDATA[TEMPAT]]></text>
				</staticText>
				<staticText>
					<reportElement x="670" y="0" width="72" height="30" uuid="d5e7ec1f-0b56-4205-b51c-eeeb1ad1b698">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
					<box>
						<pen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial" isBold="true"/>
					</textElement>
					<text><![CDATA[JUM.
PESERTA]]></text>
				</staticText>
			</frame>
		</band>
	</pageHeader>
	<detail>
		<band height="210" splitType="Stretch"/>
	</detail>
</jasperReport>
